<!DOCTYPE html>
<html lang="en">
    <%- include('./partials/head.ejs') %>
<body>
    
    <div class="wrapper">
        <%- include('./partials/nav.ejs') %>

        <div class="articles">

            <% if (articles.length) { %>
                <% articles.forEach(({ id, content }) => { %>

                    <div class="article">
                        <span class="article-text"><%= content %></span>
                        <div class="delete" data-id="<%= id %>">&times;</div>
                    </div>

                <% }) %>
            <% } %>

        </div>

    </div>

    <script>
        document.addEventListener('click', (e) => {
            const id = e.target?.dataset?.id || null
            if (id) {
                fetch(`/articles/${id}`, {
                    method: 'DELETE'
                })
                .then(() => window.location.reload())
            }
        })
    </script>

</body>
</html>